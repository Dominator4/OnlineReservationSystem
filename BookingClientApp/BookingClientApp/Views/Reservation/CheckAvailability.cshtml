@model BookingClientApp.Models.AvailableRoomsViewModel

@{
    ViewData["Title"] = "Sprawdź dostępność";
}

<h2>@ViewData["Title"]</h2>

@* Formularz do sprawdzania dostępności *@
<form asp-action="CheckAvailability" method="post">
    <div class="form-group">
        <label asp-for="CheckInDate">Data zameldowania</label>
        <input asp-for="CheckInDate" type="date" class="form-control" />
        <span asp-validation-for="CheckInDate" class="text-danger"></span>
    </div>
    <div class="form-group">
        <label asp-for="CheckOutDate">Data wymeldowania</label>
        <input asp-for="CheckOutDate" type="date" class="form-control" />
        <span asp-validation-for="CheckOutDate" class="text-danger"></span>
    </div>
    <button type="submit" class="btn btn-primary">Sprawdź dostępność</button>
</form>


    @if (Model.AvailableRooms != null && Model.AvailableRooms.Any())
    {
<form asp-action="MakeReservation" method="post">
    <input asp-for="CheckInDate" type="hidden" />
    <input asp-for="CheckOutDate" type="hidden" />

        <h3>Dostępne pokoje</h3>
        <table class="table">
            <thead>
                <tr>
                    <th>Zaznacz</th>
                    <th>Numer pokoju</th>
                    <th>Typ</th>
                    <th>Cena za noc</th>
                    <th>Udogodnienia</th>
                </tr>
            </thead>
            <tbody>
            @foreach (var room in Model.AvailableRooms)
            {
                <tr>
                    <td>
                        <input type="checkbox" name="SelectedRoomIds" value="@room.Id" />
                    </td>
                    <td>@room.Number</td>
                    <td>@room.Type</td>
                    <td>@room.Price.ToString("C")</td>
                    <td>@room.Amenities</td>
                </tr>
            }
            </tbody>
        </table>

<div class="form-group">
    <label for="guests">Liczba gości:</label>
    <input type="number" id="guests" name="Guests" class="form-control" required="required" />
</div>
        
        <button type="submit" class="btn btn-primary">Zarezerwuj</button>
</form>
    }
    else
    {
        <p>Brak dostępnych pokoi w wybranym terminie.</p>
    }

